<app-navbar></app-navbar>

<div class="container">
  <h2>Budget List</h2>
</div>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-4">

    </div>
    <div class="col-md-4">
      <button class="p-button-raised p-button-rounded" pButton type="button" (click)="openAddBudgetDialog()">Add Budget</button>
      <p-table [value]="budgets" dataKey="index" editMode="row">
        <ng-template pTemplate="header">
          <tr>
            <th>Title</th>
            <th>Amount</th>
            <th style="width:8em"></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
          <tr [pEditableRow]="rowData">
            <td>
              {{rowData.title}}
            </td>
            <td>
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <input pInputText type="text" [(ngModel)]="rowData.amount" year>
                </ng-template>
                <ng-template pTemplate="output">
                  {{rowData.amount}}
                </ng-template>
              </p-cellEditor>
            </td>
            <td style="text-align:center">
              <button pButton type="button" pInitEditableRow icon="pi pi-trash" class="ui-button-danger"
                (click)="onRowDelete(rowData,ri)"></button>
              <button *ngIf="!editing" pButton type="button" pInitEditableRow icon="pi pi-pencil" class="ui-button-info"
                (click)="onRowEditInit(rowData,ri)"></button>
              <button *ngIf="editing" pButton type="button" pSaveEditableRow icon="pi pi-check"
                class="ui-button-success" style="margin-right: .5em" (click)="onRowEditSave(rowData,ri)"></button>
              <button *ngIf="editing" pButton type="button" pCancelEditableRow icon="pi pi-times"
                class="ui-button-danger" (click)="onRowEditCancel(rowData, ri)"></button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>


<p-dialog header="Add Budget" [(visible)]="dialog">
  <ng-template pTemplate="header">
    Add New Budget
  </ng-template>
  <p-dialog-content>
    <p-selectButton [options]="titles" [(ngModel)]="newBudget.title"></p-selectButton>
    <input pInputText placeholder="Amount" [(ngModel)]="newBudget.amount" />
  </p-dialog-content>
  <ng-template pTemplate="footer">
    <button class="p-button-raised p-button-rounded" (click)="addBudget(newBudget)">Add Budget</button>
  </ng-template>
</p-dialog>

